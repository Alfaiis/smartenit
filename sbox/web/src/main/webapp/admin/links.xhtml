<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<link rel="shortcut icon" href="../../assets/ico/favicon.ico" />

	<title>SBox Links</title>
	<link href="../css/bootstrap.css" rel="stylesheet" />
	<link href="../css/sbox-main.css" rel="stylesheet" />
	<link href="../css/bootstrapValidator.css" rel="stylesheet" />

	<script src="../js/jquery.js"></script>
	<script src="../js/bootstrap.js"></script>
</h:head>

<h:body>

	<div class="container">
		<!-- Static navbar -->
		<div class="navbar navbar-default" role="navigation">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse"
						data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">SmartenIT</a>
				</div>
				<div class="navbar-collapse collapse">
					<h:form>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="index.xhtml">Home</a></li>
							<li><a href="isp.xhtml">ISP</a></li>
							<li class="dropdown active"><a href="#"
								class="dropdown-toggle" data-toggle="dropdown">Network <b
									class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="routers.xhtml">Routers</a></li>
									<li><a href="sdncontrollers.xhtml">SDN Controllers</a></li>
									<li><a href="links.xhtml">Links</a></li>
									<li><a href="tunnels.xhtml">Tunnels</a></li>
								</ul></li>
							<li class="dropdown"><a href="#" class="dropdown-toggle"
								data-toggle="dropdown">Datacenters <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="localclouds.xhtml">Local Clouds</a></li>
									<li><a href="remoteclouds.xhtml">Remote Clouds</a></li>
									<li><a href="interdatacenter.xhtml">Inter-Datacenter</a></li>
								</ul></li>
							<li class="dropdown"><a href="#" class="dropdown-toggle"
								data-toggle="dropdown">SBox <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="settings.xhtml">Settings</a></li>
									<li><a href="#">Reports</a></li>
									<li><a href="#">Analytics</a></li>
									<li><a href="#">Demo</a></li>
									<li class="divider"></li>
									<li><h:commandLink value="Logout"
											action="#{dashboardBean.logout}" /></li>
								</ul></li>
						</ul>
					</h:form>
				</div>
				<!--/.nav-collapse -->
			</div>
			<!--/.container-fluid -->
		</div>

		<div class="row marketing">
			<h2 class="page-header">Links</h2>
			<h:form class="form-horizontal" role="form" id="links">
				<div class="form-group">
					<label for="linkID" class="col-xs-4 control-label">Link ID</label>
					<div class="col-xs-6">
						<h:inputText type="text" class="form-control" id="linkID"
							placeholder="Link ID"
							value="#{linksBean.link.linkID.localLinkID}"
							rendered="#{linksBean.editable}" />
						<h:outputText type="text" class="form-control"
							value="#{linksBean.link.linkID.localLinkID}"
							rendered="#{not linksBean.editable}" />
					</div>
				</div>

				<div class="form-group">
					<label for="ispName" class="col-xs-4 control-label">ISP
						Name</label>
					<div class="col-xs-6">
						<h:inputText type="text" class="form-control" id="ispName"
							placeholder="ISP Name"
							value="#{linksBean.link.linkID.localIspName}"
							rendered="#{linksBean.editable}" />
						<h:outputText type="text" class="form-control"
							value="#{linksBean.link.linkID.localIspName}"
							rendered="#{not linksBean.editable}" />
					</div>
				</div>

				<div class="form-group">
					<label for="address" class="col-xs-4 control-label">Link
						Address</label>
					<div class="col-xs-6">
						<h:inputText type="text" class="form-control" id="address"
							placeholder="Link Address"
							value="#{linksBean.link.address.prefix}" />
					</div>
				</div>

				<div class="form-group">
					<label for="physicalInterfaceName" class="col-xs-4 control-label">Physical
						Interface Name</label>
					<div class="col-xs-6">
						<h:inputText type="text" class="form-control"
							id="physicalInterfaceName" placeholder="Physical Interface Name"
							value="#{linksBean.link.physicalInterfaceName}" />
					</div>
				</div>

				<div class="form-group">
					<label for="bgRouters" class="col-xs-4 control-label">BG
						Router</label>
					<div class="col-xs-6">
						<h:selectOneMenu value="#{linksBean.selectedBGRouter}"
							id="bgRouters" class="form-control">
							<f:selectItems value="#{linksBean.bgRoutersArray}" var="bg"
								itemLabel="#{bg.managementAddress.prefix}"
								itemValue="#{bg.managementAddress.prefix}" />
						</h:selectOneMenu>
					</div>
				</div>

				<div class="form-group">
					<label for="tunnelEndPrefix" class="col-xs-4 control-label">Tunnel
						End Prefix</label>
					<div class="col-xs-4">
						<h:inputText type="text" class="form-control" id="tunnelEndPrefix"
							value="#{linksBean.link.tunnelEndPrefix.prefix}" />
					</div>
					<div class="col-xs-2">
						<h:inputText type="text" class="form-control"
							id="tunnelEndPrefixLength"
							value="#{linksBean.link.tunnelEndPrefix.prefixLength}" />
					</div>
				</div>

				<div class="form-group">
					<label for="policerBandwidthLimitFactor"
						class="col-xs-4 control-label">Bandwidth Limit Factor</label>
					<div class="col-xs-4">
						<h:inputText type="text" class="form-control"
							id="policerBandwidthLimitFactor"
							value="#{linksBean.link.policerBandwidthLimitFactor}" />
					</div>
				</div>

				<div class="form-group">
					<label for="filterInterfaceName" class="col-xs-4 control-label">Filter
						Interface Name</label>
					<div class="col-xs-4">
						<h:inputText type="text" class="form-control"
							id="filterInterfaceName"
							value="#{linksBean.link.filterInterfaceName}" />
					</div>
				</div>

				<div class="form-group">
					<label for="aggregateLeakageFactor" class="col-xs-4 control-label">Aggregate
						Leakage Factor</label>
					<div class="col-xs-4">
						<h:inputText type="text" class="form-control"
							id="aggregateLeakageFactor"
							value="#{linksBean.link.aggregateLeakageFactor}" />
					</div>
				</div>

				<div class="form-group row">
					<label class="col-xs-4 control-label">Segment (left, right,
						a, b)</label>
					<div class="col-xs-4">
						<div class="row">
							<div class="col-xs-6">
								<h:inputText type="text" class="col-md-4 form-control"
									id="leftBorder" value="#{linksBean.segment.leftBorder}" />
							</div>
							<div class="col-xs-6">
								<h:inputText type="text" class="form-control" id="rightBorder"
									value="#{linksBean.segment.rightBorder}" />
							</div>
						</div>
					</div>
					<div class="col-xs-3">
						<div class="row">
							<div class="col-xs-6">
								<h:inputText type="text" class="form-control" id="a"
									value="#{linksBean.segment.a}" />
							</div>
							<div class="col-xs-6">
								<h:inputText type="text" class="form-control" id="b"
									placeholder="Length" value="#{linksBean.segment.b}" />
							</div>
						</div>
					</div>
					<div class="col-xs-1">
						<h:commandLink class="btn btn-primary btn-sm">
							<span class="glyphicon glyphicon-plus"> <f:ajax
									execute="rightBorder leftBorder a b"
									listener="#{linksBean.addSegment}"
									render="segmentsTable rightBorder leftBorder a b" />
							</span>
						</h:commandLink>
					</div>

				</div>

				<center>
					<div class="form-group row">
						<div class="table-responsive">
							<h:dataTable value="#{linksBean.link.costFunction.segments}"
								var="seg"
								class="table table-striped table-condensed table-nonfluid"
								id="segmentsTable">
								<h:column class="col-xs-2">
									<f:facet name="header">Left Border</f:facet>
								#{seg.leftBorder}
							</h:column>
								<h:column class="col-xs-2">
									<f:facet name="header">Right Border</f:facet>
								#{seg.rightBorder}
							</h:column>
								<h:column class="col-xs-2">
									<f:facet name="header">a</f:facet>
								#{seg.a}
							</h:column>
								<h:column class="col-xs-2">
									<f:facet name="header">b</f:facet>
								#{seg.b}
							</h:column>

								<h:column class="col-xs-2">
									<f:facet name="header" class="col-xs-2">Actions</f:facet>
									<div class="btn-group">
										<h:commandLink class="btn btn-danger btn-sm" type="button">
											<span class="glyphicon glyphicon-remove"> <f:ajax
													execute="@this" render="segmentsTable links"
													listener="#{linksBean.deleteSegment(seg)}" />
											</span>
										</h:commandLink>
									</div>
								</h:column>
							</h:dataTable>
						</div>
					</div>
				</center>

				<div class="form-group">
					<div class="btn-group col-xs-6 col-xs-offset-4">
						<h:commandButton type="submit" class="btn btn-primary"
							action="#{linksBean.updateLink}" value="Submit" />
						<h:commandButton type="reset" class="btn btn-default"
							value="Cancel" />
					</div>
				</div>
			</h:form>
			<h:form>
				<div class="table-responsive">
					<h:dataTable value="#{linksBean.linksList}" var="l"
						class="table table-striped">
						<h:column>
							<f:facet name="header">Link ID</f:facet>
								#{l.linkID.localLinkID}
							</h:column>
						<h:column>
							<f:facet name="header">ISP Name</f:facet>
								#{l.linkID.localIspName}
							</h:column>
						<h:column>
							<f:facet name="header">Address</f:facet>
								#{l.address.prefix}
							</h:column>
						<h:column>
							<f:facet name="header">BG Router</f:facet>
								#{l.bgRouter.managementAddress.prefix}
							</h:column>
						<h:column>
							<f:facet name="header">Tunnel End Prefix</f:facet>
								#{l.tunnelEndPrefix.prefix}/#{l.tunnelEndPrefix.prefixLength}
							</h:column>
						<h:column>
							<f:facet name="header">Actions</f:facet>
							<div class="btn-group">
								<h:commandLink type="button" class="btn btn-warning btn-sm"
									action="#{linksBean.editLink(l)}">
									<span class="glyphicon glyphicon-pencil" />
								</h:commandLink>
								<h:commandLink type="button" class="btn btn-danger btn-sm"
									action="#{linksBean.deleteLink(l)}">
									<span class="glyphicon glyphicon-remove" />
								</h:commandLink>
							</div>
						</h:column>
					</h:dataTable>
				</div>
			</h:form>
		</div>

		<div class="footer">
			<p>&copy; The SmartenIT Consortium 2014</p>
		</div>

	</div>
	<!-- /container -->

	<script>
		$('.dropdown-toggle').dropdown()
	</script>

	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="../js/bootstrap-dropdown.js"></script>
	<script src="../js/bootstrapValidator.js"></script>
	<script src="../js/validator/ip.js"></script>
	<script src="../js/validator/notEmpty.js"></script>
	<script src="../js/validator/between.js"></script>
	<script src="../js/validator/integer.js"></script>

	<script>
		$(document)
				.ready(
						function() {
							$('#links')
									.bootstrapValidator(
											{
												feedbackIcons : {
													valid : 'glyphicon glyphicon-ok',
													invalid : 'glyphicon glyphicon-remove',
													validating : 'glyphicon glyphicon-refresh'
												},
												fields : {
													'links:linkID' : {
														validators : {
															notEmpty : {
																message : 'The Link ID must not be empty.'
															}
														}
													},
													'links:ispName' : {
														validators : {
															notEmpty : {
																message : 'The ISP name must not be empty.'
															}
														}
													},
													'links:address' : {
														validators : {
															ip : {
																message : 'The Link address is not an IPv4 address.'
															},
															notEmpty : {
																message : 'The Link address must not be empty.'
															}
														}
													},
													'links:inboundInterfaceCounterOID' : {
														validators : {
															notEmpty : {
																message : 'The Outbound interface counter OID must not be empty.'
															}
														}
													},
													'links:outboundInterfaceCounterOID' : {
														validators : {
															notEmpty : {
																message : 'The Inbound interface counter OID must not be empty.'
															}
														}
													},
													'links:physicalInterfaceName' : {
														validators : {
															notEmpty : {
																message : 'The Physical interface name must not be empty.'
															}
														}
													},
													'links:bgRouters' : {
														validators : {
															notEmpty : {
																message : 'The BG Router must not be empty.'
															}
														}
													},
													'links:tunnelEndPrefix' : {
														validators : {
															ip : {
																message : 'The Tunnel End Prefix is not an IPv4 address.'
															},
															notEmpty : {
																message : 'The Tunnel End Prefix must not be empty.'
															}
														}
													},
													'links:tunnelEndPrefixLength' : {
														validators : {
															between : {
																min : 0,
																max : 32,
																message : 'The Tunnel End Prefix Length must be between 0 and 32.'
															},
															integer : {
																message : 'The Tunnel End Prefix Length must be an integer.'
															}
														}
													},
													'links:policerBandwidthLimitFactor' : {
														validators : {
															between : {
																min : 0,
																max : 1,
																message : 'The Bandwidth Limit Factor must be between 0 and 1.'
															}
														}
													},
													'links:filterInterfaceName' : {
														validators : {
															notEmpty : {
																message : 'The Filter Interface Name must not be empty.'
															}
														}
													},
													'links:aggregateLeakageFactor' : {
														validators : {
															between : {
																min : 0,
																max : 1,
																message : 'The Aggregate Leakage Factor must be between 0 and 1.'
															}
														}
													}
												}
											});
						});
	</script>
</h:body>
</html>